<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Workspace · pnpm</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="pnpm supports concurrent actions in multi-package repositories (workspaces)."/><meta name="docsearch:version" content="4.6"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Workspace · pnpm"/><meta property="og:type" content="website"/><meta property="og:url" content="https://pnpm.js.org/"/><meta property="og:description" content="pnpm supports concurrent actions in multi-package repositories (workspaces)."/><meta property="og:image" content="https://pnpm.js.org/img/ogimage.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://pnpm.js.org/img/ogimage.png"/><link rel="shortcut icon" href="/img/favicon.png"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://pnpm.js.org/blog/atom.xml" title="pnpm Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://pnpm.js.org/blog/feed.xml" title="pnpm Blog RSS Feed"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-91385296-1', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/en"><img class="logo" src="/img/pnpm-no-name-with-frame.svg" alt="pnpm"/><h2 class="headerTitleWithLogo">pnpm</h2></a><a href="/en/versions"><h3>4.6</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/en/4.6/motivation" target="_self">Docs</a></li><li class=""><a href="/en/4.6/faq" target="_self">FAQ</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li><li class=""><a href="/blog/" target="_self">Blog</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/pnpm/pnpm.github.io/edit/source/docs/workspace.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">Workspace</h1></header><article><div><span><p>pnpm supports concurrent actions in multi-package repositories (workspaces).</p>
<p>By default, when you run the <a href="pnpm-recursive"><code>pnpm recursive [action]</code></a> commands,
all the directories are searched for packages (directories with <code>package.json</code> file).
You can control what directories are searched by passing an array of globs to <code>packages</code> in <code>pnpm-workspace.yaml</code>.</p>
<p>An example of a <code>pnpm-workspace.yaml</code>:</p>
<pre><code class="hljs css language-yaml"><span class="hljs-attr">packages:</span>
  <span class="hljs-comment"># the root package.json</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">'.'</span>
  <span class="hljs-comment"># all packages in subdirs of packages/ and components/</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">'packages/**'</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">'components/**'</span>
  <span class="hljs-comment"># exclude packages that are inside test/ directories</span>
  <span class="hljs-bullet">-</span> <span class="hljs-string">'!**/test/**'</span>
</code></pre>
<p><code>pnpm-workspace.yaml</code> should be in the root of the workspace.</p>
<h2><a class="anchor" aria-hidden="true" id="workspace-ranges-workspace"></a><a href="#workspace-ranges-workspace" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Workspace ranges (workspace:)</h2>
<p>Supported since v3.7.0.</p>
<p>By default, pnpm will link packages from the workspace if the available packages match
the declared ranges. For instance, <code>foo@1.0.0</code> is linked into <code>bar</code> if <code>bar</code> has <code>&quot;foo&quot;: &quot;^1.0.0&quot;</code> in dependencies.
But if <code>bar</code> has <code>&quot;foo&quot;: &quot;2.0.0&quot;</code> in dependencies and <code>foo@2.0.0</code> is not in the workspace then
<code>foo@2.0.0</code> will be installed from the registry. This behavior introduces some uncertainty.</p>
<p>Luckily, pnpm supports the <code>workspace:</code> protocol (same as in Yarn v2). When this protocol is used pnpm will refuse
to resolve to anything else than a local workspace package. So if you set <code>&quot;foo&quot;: &quot;workspace:2.0.0&quot;</code> installation
will fail telling that no <code>&quot;foo@2.0.0&quot;</code> is present in the workspace.</p>
<h2><a class="anchor" aria-hidden="true" id="publishing-workspace-packages"></a><a href="#publishing-workspace-packages" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Publishing workspace packages</h2>
<p>When a workspace package is packed into an archive (whether it's through <code>pnpm pack</code> or one of the publish commands like <code>pnpm publish</code>), we dynamically replace any <code>workspace:</code> dependency by:</p>
<ul>
<li>The corresponding version in the target workspace (if you use <code>*</code>)</li>
<li>The associated semver range (for any other range type)</li>
</ul>
<p>So for example, if we assume we have three workspace packages whose current version is <code>1.5.0</code>, the following:</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"dependencies"</span>: {
    <span class="hljs-attr">"foo"</span>: <span class="hljs-string">"workspace:*"</span>,
    <span class="hljs-attr">"bar"</span>: <span class="hljs-string">"workspace:^1.2.3"</span>
  }
}
</code></pre>
<p>Will be transformed into:</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"dependencies"</span>: {
    <span class="hljs-attr">"foo"</span>: <span class="hljs-string">"1.5.0"</span>,
    <span class="hljs-attr">"bar"</span>: <span class="hljs-string">"^1.2.3"</span>
  }
}
</code></pre>
<p>This feature allows you to not have to depend on something else than your local workspace packages, while still being able to publish the resulting packages to the remote registry without having to run intermediary publish steps - your consumers will be able to use your published workspaces as any other package, still benefiting from the guarantees semver offers.</p>
</span></div></article></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#workspace-ranges-workspace">Workspace ranges (workspace:)</a></li><li><a href="#publishing-workspace-packages">Publishing workspace packages</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/pnpm-light.svg" alt="pnpm" width="66" height="58"/></a><div><h5>Docs</h5><a href="/en/installation.html">Getting Started</a></div><div><h5>Community</h5><a href="/en/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/pnpm" target="_blank">Stack Overflow</a><a href="https://bit.ly/pnpm-discord-invite">Project Chat</a><a href="https://twitter.com/pnpmjs" target="_blank">Twitter</a></div><div><h5>More</h5><a href="/blog/">Blog</a><a href="https://github.com/pnpm/pnpm">GitHub</a><a class="github-button" href="https://github.com/pnpm/pnpm" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: '802b1d6ee5450a4296581a8e14aff417',
                indexName: 'pnpm',
                inputSelector: '#search_input_react',
                algoliaOptions: {"facetFilters":["language:en","version:4.6"]}
              });
            </script></body></html>